
/* Paleta */
$bg: #eaf6f7;
$ink: #172b3a;
$muted: #5d6b7a;
$border: #9dd7db;
$primary: #0a80fb;
$chip-bg: #e6f7ff;

.detalle-paciente {
  background: #E7FAFA;
  min-height: 100dvh;
  padding: 24px;
  box-sizing: border-box;
  display: grid;
  gap: 20px;
}

/* Header */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 12px;

  h1 {
    font-size: 2rem;
    font-weight: 800;
    color: #0a2a3a;
    margin: 0;
  }

  .btn-reporte {
    background: #ff6565;
    color: #fff;
    border: 0;
    border-radius: 12px;
    padding: 10px 18px;
    font-weight: 800;
    cursor: pointer;
    transition: filter .2s;
  }
  .btn-reporte:hover { filter: brightness(.95); }
}

/* Grid principal (2 columnas) */
.grid-detalle {
  display: grid;
  grid-template-columns: 2fr 1fr; /* izquierda grande, derecha sidebar */
  gap: 16px;
}

/* Card base */
.card {
  background: #fff;
  border: 3px solid #2d7fb0;
  border-radius: 16px;
  padding: 18px;
  display: grid;
  gap: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,.05);

  h3 {
    font-size: 1.3rem;
    font-weight: 700;
    color: #1a2a3a;
    margin: 0 0 8px 0;
  }
  p { margin: 0; line-height: 1.4; color: #22343d; }
}

/* Dos columnas internas para datos */
.cols {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;

  ul { list-style: none; padding: 0; margin: 0; display: grid; gap: 6px; }
}

/* Afecciones como chips */
.tags { display: flex; flex-wrap: wrap; gap: 8px; }
.tag {
  background: #9CFFD9;
  border: 2px solid #6BEFC2;
  color: #0f2b2b;
  font-weight: 700;
  border-radius: 999px;
  padding: 6px 12px;
  font-size: .9rem;
}

/* Tratamientos */
.tratamiento {
  border: 1px solid #d6eaf7;
  border-radius: 12px;
  padding: 10px;
  background: #f7fffe;
  display: grid;
  gap: 6px;
}

/* Resumen KPIs */
.resumen {
  display: flex;
  gap: 12px;
    max-height: 10.5rem;
  .kpi {
    flex: 1;
    background: #f7fffe;
    border: 2px solid #cfeee6;
    border-radius: 12px;
    padding: 10px 12px;
    display: grid;
    justify-items: center;
    gap: 6px;
  }
  .kpi.alerta { border-color: #ffd1d1; }
  .big { font-size: 2rem; font-weight: 800; }
}

/* Gr√°fica */
.chart { width: 100%; height: 160px; }

/* Historial */
.search {
  width: 80%;
  padding: 10px 12px;
  border: 1px solid #7aa4a9;
  border-radius: 10px;
  background: #f7fffe;
}
.dias { border: 1px solid #e6eef8; border-radius: 12px; padding: 10px; display: grid; gap: 10px; }
.dia-head { display: flex; justify-content: space-between; align-items: center; }
.reg-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
.reg {
  background: #f1fbff;
  border: 1px solid #d6eaf7;
  border-radius: 12px;
  padding: 8px;
  text-align: center;
  display: grid;
  gap: 4px;
}
.hora { font-weight: 700; }
.glu { font-weight: 800; }

.btn {
  padding: 10px 16px;
  border-radius: 12px;
  border: 0;
  font-weight: 800;
  cursor: pointer;
}
.btn.verde {
  background: #9CFFD9;
  border: 2px solid #6BEFC2;
  color: #0f2b2b;
}

/* Volver */
.link-volver {
  text-decoration: none;
  color: #0a80fb;
  font-weight: 800;
}

/* Responsive */
@media (max-width: 1024px) {
  .grid-detalle { grid-template-columns: 1fr; }
  .cols { grid-template-columns: 1fr; }
}
/* ===== Historial ===== */
.card.historial {
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-height: 450px;     /* üí° altura m√°xima visible */
  overflow-y: auto;      /* üí° scroll vertical */
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: #0a80fb #eaf8ff; /* Firefox colors */
}

/* Scrollbar para Chrome/Edge */
.card.historial::-webkit-scrollbar {
  width: 8px;
}

.card.historial::-webkit-scrollbar-thumb {
  background-color: #0a80fb;
  border-radius: 4px;
}

.card.historial::-webkit-scrollbar-thumb:hover {
  background-color: #0569d9;
}

.card.historial::-webkit-scrollbar-track {
  background-color: #eaf8ff;
}

/* Estilo interno */
.card.historial .dias {
  border: 1px solid #e6eef8;
  border-radius: 12px;
  padding: 10px;
  display: grid;
  gap: 10px;
  background: #f7fffe;
  margin-bottom: 10px;
}

.card.historial .dia-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.card.historial .reg-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  gap: 8px;
}

.card.historial .reg {
  background: #f1fbff;
  border: 1px solid #cfe7f4;
  border-radius: 10px;
  padding: 8px;
  text-align: center;
}

.card.historial .btn {
  margin-top: 4px;
  align-self: center;
}

.resaltado {
  background-color: red;
  /* o cualquier estilo que quieras */
}

/* Base de cada registro */
.reg {
  background: #f1fbff;
  border: 1px solid #cfe7f4;
  border-radius: 10px;
  padding: 8px;
  text-align: center;
  display: grid;
  gap: 4px;
  position: relative;
  transition: box-shadow .2s ease, border-color .2s ease, background .2s ease;
}

/* Cuando hay alerta (capa base com√∫n) */
.reg.alerta {
  border-width: 2px;
  box-shadow: 0 0 0 3px rgba(255, 99, 71, 0.08);
}

/* Diferenciar por nivel (colores suaves acordes al tema) */
.reg.alerta.alta {
  border-color: #ff6b6b;
  background: #ffe9e9;
}
.reg.alerta.media {
  border-color: #ffb74d;
  background: #fff2df;
}
.reg.alerta.baja {
  border-color: #ffd54f;
  background: #fff8dc;
}

/* Badge circular en la esquina cuando hay alerta */
.reg.alerta::after {
  content: "!";
  position: absolute;
  top: 6px;
  right: 6px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  font-size: 12px;
  font-weight: 800;
  display: grid;
  place-items: center;
  color: #fff;
  background: #ff6b6b; /* por defecto (alta) */
}

/* Ajuste de color del badge por nivel */
.reg.alerta.media::after { background: #ffb74d; }
.reg.alerta.baja::after  { background: #ffd54f; }

/* Negrita el valor de glucosa cuando hay alerta */
.reg.alerta .glu { font-weight: 900; }
/* === MODAL GENERAL === */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(2px);
  z-index: 90;
  animation: fadeIn 0.3s ease;
}

.modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #f6fcfc;
  width: 380px;
  max-width: 95vw;
  max-height: 90vh;
  border-radius: 12px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
  z-index: 100;
  display: flex;
  flex-direction: column;
  animation: zoomIn 0.25s ease;
  overflow: hidden;
}

/* === CABECERA === */
.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.8rem 1rem;
  border-bottom: 1px solid #bcd8e3;
  background: #e9f8ff;

  h2 {
    font-size: 1.1rem;
    margin: 0;
    color: #1a2a3a;
  }

  .close {
    background: none;
    border: none;
    font-size: 1.2rem;
    color: #333;
    cursor: pointer;
    transition: 0.2s;
    &:hover {
      color: #0a80fb;
      transform: scale(1.1);
    }
  }
}

/* === CUERPO === */
.modal-body {
  padding: 1rem;
  overflow-y: auto;
  flex: 1;

  .reg-card {
    border: 2px solid #5abdf5;
    border-radius: 10px;
    padding: 0.5rem 0.8rem;
    margin-bottom: 0.8rem;
    background: #fff;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);

    .reg-title {
      font-weight: 600;
      margin-bottom: 0.3rem;
      color: #1a2a3a;
    }
    b {
      color: #0a80fb;
    }
  }

  .sub {
    margin-top: 1.2rem;
    font-weight: 600;
    color: #1a2a3a;
  }

  .alert-card {
    border: 2px solid #fca5a5;
    background: #ffdcdc;
    border-radius: 10px;
    padding: 0.6rem 0.8rem;
    margin-bottom: 0.8rem;
    font-size: 0.9rem;

    b {
      color: #d92626;
    }
    p {
      margin: 0.3rem 0 0;
      color: #333;
    }
  }

  .muted {
    color: #7c8b93;
    font-size: 0.9rem;
    font-style: italic;
    text-align: center;
  }
}

/* === PIE === */
.modal-footer {
  padding: 0.8rem 1rem;
  border-top: 1px solid #bcd8e3;
  text-align: right;

  .btn {
    background: #0a80fb;
    color: #fff;
    border: none;
    border-radius: 20px;
    padding: 0.4rem 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: 0.2s;

    &.verde {
      background: #5fff12;
      color: #1a2a3a;
    }

    &:hover {
      opacity: 0.9;
      transform: scale(1.05);
    }
  }
}

/* === ANIMACIONES === */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes zoomIn {
  from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
  to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

/* === SCROLLBAR PERSONALIZADA === */
.modal-body::-webkit-scrollbar {
  width: 8px;
}
.modal-body::-webkit-scrollbar-thumb {
  background: #c4dff2;
  border-radius: 10px;
}
.modal-body::-webkit-scrollbar-thumb:hover {
  background: #0a80fb;
}


.perfil-header {
  display: flex;
  align-items: center;
  gap: 22px;
  margin-bottom: 24px;
  animation: slideIn 0.6s ease-out;

  @media (max-width: 700px) {
    flex-direction: column;
    text-align: center;
    gap: 14px;
  }
}

/* FOTO M√ÅS GRANDE Y RESPONSIVE */
.foto-wrapper {
  width: 150px;
  height: 150px;
  min-width: 150px;
  border-radius: 50%;
  overflow: hidden;
  border: 4px solid $primary;
  box-shadow: 0 5px 14px rgba(0, 0, 0, 0.15);
  background: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all .25s ease;

  @media (max-width: 700px) {
    width: 130px;
    height: 130px;
    min-width: 130px;
  }

  @media (max-width: 450px) {
    width: 115px;
    height: 115px;
    min-width: 115px;
  }
}

.foto-perfil {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
